{% extends 'base.html' %}
{% load static %}

{% block content %}
    <header>
        <h1>{{app_name}} - Perpustakaan Ilmu Pengetahuan</h1>
        <h6>by: Gyanamurti Adhikara Bano</h6>
        <h6>nama: {{name}}</h6>
        <h6>kelas: {{class}}</h6>

        <a href="{% url 'main:logout' %}">
            <button>
                Logout
            </button>
        </a>
        <h5>Sesi terakhir login: {{ last_login }}</h5>
    </header>
    <main>
        <section class="add-collection">
            <h2>Tambah Koleksi Buku</h2>
            <a href="{% url 'main:create_product' %}">
                <button id="addCollectionButton">Tambah Koleksi Buku</button>
            </a>


        </section>
        <section class="stock-control">
            <h2>Stok Buku</h2>
            <p>Total Stok Buku: <span id="totalStock">{{ total_stock }}</span></p>
        </section>
        <section class="book-list">
            <h2>Koleksi Buku</h2>
            <div style="overflow-x: auto; margin-bottom: 20px;">
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th style="padding: 10px; border: 1px solid #ccc;">Nama</th>
                            <th style="padding: 10px; border: 1px solid #ccc;">Gambar</th>
                            <th style="padding: 10px; border: 1px solid #ccc;">Penulis</th>
                            <th style="padding: 10px; border: 1px solid #ccc;">Tahun Terbit</th>
                            <th style="padding: 10px; border: 1px solid #ccc;">Penerbit</th>
                            <th style="padding: 10px; border: 1px solid #ccc;">Genre</th>
                            <th style="padding: 10px; border: 1px solid #ccc;">Deskripsi</th>
                            <th style="padding: 10px; border: 1px solid #ccc;">Rating</th>
                            <th style="padding: 10px; border: 1px solid #ccc;">Stok</th>
                            <th style="padding: 10px; border: 1px solid #ccc;">Aksi</th>
                            <th style="padding: 10px; border: 1px solid #ccc;">Date Added</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% comment %} Berikut cara memperlihatkan data produk di bawah baris ini {% endcomment %}
                        {% for product in products %}
                            <tr>
                                <td style="padding: 10px; border: 1px solid #ccc;">{{ product.name }}</td>
                                <td style="padding: 10px; border: 1px solid #ccc;">
                                    {% if product.image %}
                                        <img src="{{ product.image.url }}" alt="{{ product.name }}" style="max-width: 200px; max-height: 150px; border: 1px solid #ccc;">
                                    {% else %}
                                        <p>No image available for this product</p>
                                    {% endif %}
                                </td>
                                <td style="padding: 10px; border: 1px solid #ccc;">{{ product.author }}</td>
                                <td style="padding: 10px; border: 1px solid #ccc;">{{ product.year }}</td>
                                <td style="padding: 10px; border: 1px solid #ccc;">{{ product.publisher }}</td>
                                <td style="padding: 10px; border: 1px solid #ccc;">{{ product.genre }}</td>
                                <td style="padding: 10px; border: 1px solid #ccc;">{{ product.description }}</td>
                                <td style="padding: 10px; border: 1px solid #ccc;">{{ product.rating }}/5</td>
                                <td style="padding: 10px; border: 1px solid #ccc;">{{ product.amount }}</td>
                                <td style="padding: 10px; border: 1px solid #ccc;">
                                    {% with button_label="Delete" %}
                                    <form method="post" action="{% url 'main:increase_stock' product.id %}">
                                        {% csrf_token %}
                                        <input type="hidden" name="action" value="increase">
                                        <button type="submit" style="width: {{ button_label|length }}ch; text-align: center; display: inline-flex; align-items: center; justify-content: center;">+</button>
                                    </form>
                                    <form method="post" action="{% url 'main:decrease_stock' product.id %}">
                                        {% csrf_token %}
                                        <input type="hidden" name="action" value="decrease">
                                        <button type="submit" style="width: {{ button_label|length }}ch; text-align: center; display: inline-flex; align-items: center; justify-content: center;">-</button>
                                    </form>
                                    <form method="post" action="{% url 'main:delete_product' product.id %}">
                                        {% csrf_token %}
                                        <input type="hidden" name="action" value="delete">
                                        <button type="submit" style="width: {{ button_label|length }}ch; text-align: center; display: inline-flex; align-items: center; justify-content: center;">Delete</button>
                                    </form>
                                    {% endwith %}
                                </td>                                               
                                <td style="padding: 10px; border: 1px solid #ccc; font-size: smaller;">{{ product.date_added }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>
        
        <section class="about-us">
            <h2>About Us</h2>
            <p>LibraLogia, berasal dari kata "libra" dalam bahasa Inggris yang merujuk pada perpustakaan dan "logia" dalam bahasa Yunani yang berarti ilmu pengetahuan, adalah platform yang memadukan kata "libra" yang merujuk pada perpustakaan dan "logia" dalam bahasa Yunani yang berarti ilmu pengetahuan. Kami hadir untuk menyediakan solusi pengelolaan buku yang efisien dan praktis. Dengan LibraLogia, Anda dapat mengelola koleksi buku dengan mudah dan mengawasi stok dengan cepat. Kami bertujuan untuk memudahkan akses pengetahuan bagi perpustakaan dan individu. Selamat datang di LibraLogia, tempat di mana ilmu pengetahuan dan perpustakaan bertemu dalam satu platform.</p>
        </section>
    </main>
    <footer>
        <p>&copy; 2023 LibraLogia - Perpustakaan Ilmu Pengetahuan</p>
    </footer>
{% endblock content %}
